<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>T√≠nh ƒêi·ªÉm Trung B√¨nh</title>
  <style>
    :root {
      --primary: #4facfe;
      --primary-dark: #00f2fe;
      --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      --text-main: #2d3436;
      --success: #00b894;
      --warning: #fdcb6e;
      --danger: #d63031;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background: var(--bg-gradient);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      color: var(--text-main);
    }

    .card {
      background: white;
      width: 100%;
      max-width: 420px;
      padding: 40px 30px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      transition: transform 0.3s ease;
    }

    h2 {
      text-align: center;
      margin-top: 0;
      color: #333;
      font-weight: 700;
    }

    .input-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #555;
    }

    input[type="number"] {
      width: 100%;
      padding: 15px;
      border: 2px solid #eee;
      border-radius: 12px;
      font-size: 16px;
      transition: border-color 0.3s;
      outline: none;
    }

    input[type="number"]:focus {
      border-color: var(--primary);
    }

    input[type="number"].invalid {
      border-color: var(--danger);
      background-color: #fff0f0;
    }

    .btn-group {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    button {
      flex: 1;
      padding: 15px;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s, opacity 0.2s;
    }

    button:active { transform: scale(0.98); }

    .btn-calc {
      background: linear-gradient(to right, #4facfe 0%, #00f2fe 100%);
      color: white;
    }

    .btn-reset {
      background: #eee;
      color: #666;
      flex: 0.4;
    }

    .btn-reset:hover { background: #e0e0e0; }

    /* Khu v·ª±c hi·ªÉn th·ªã k·∫øt qu·∫£ */
    .result-box {
      margin-top: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 15px;
      text-align: center;
      display: none; /* ·∫®n m·∫∑c ƒë·ªãnh */
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .score-big {
      font-size: 48px;
      font-weight: 800;
      margin: 10px 0;
      line-height: 1;
    }

    .grade-badge {
      display: inline-block;
      padding: 5px 15px;
      border-radius: 20px;
      color: white;
      font-weight: bold;
      font-size: 14px;
      vertical-align: middle;
      margin-left: 10px;
    }

    /* M√†u s·∫Øc theo ƒëi·ªÉm */
    .color-good { color: var(--success); }
    .bg-good { background-color: var(--success); }
    
    .color-mid { color: var(--warning); }
    .bg-mid { background-color: var(--warning); } /* C·∫ßn text ƒëen cho m√†u n√†y n·∫øu c·∫ßn */
    
    .color-bad { color: var(--danger); }
    .bg-bad { background-color: var(--danger); }

    .error-text {
      color: var(--danger);
      font-size: 13px;
      margin-top: 5px;
      display: none;
    }

  </style>
</head>
<body>

  <div class="card">
    <h2>üìä T√≠nh ƒêi·ªÉm</h2>

    <div class="input-group">
      <label for="diemQuaTrinh">ƒêi·ªÉm Qu√° Tr√¨nh </label>
      <input type="number" id="diemQuaTrinh" placeholder="V√≠ d·ª•: 8.5" step="0.1" onkeypress="handleEnter(event)">
      <div id="err-qt" class="error-text">ƒêi·ªÉm kh√¥ng h·ª£p l·ªá (0-10)</div>
    </div>

    <div class="input-group">
      <label for="diemThiCuoiKy">ƒêi·ªÉm Thi Cu·ªëi K·ª≥ </label>
      <input type="number" id="diemThiCuoiKy" placeholder="V√≠ d·ª•: 7.0" step="0.1" onkeypress="handleEnter(event)">
      <div id="err-ck" class="error-text">ƒêi·ªÉm kh√¥ng h·ª£p l·ªá (0-10)</div>
    </div>

    <div class="btn-group">
      <button class="btn-reset" onclick="resetForm()">‚Ü∫ L·∫°i</button>
      <button class="btn-calc" onclick="tinhDiem()">T√≠nh Ngay</button>
    </div>

    <div class="result-box" id="resultBox">
      <div>ƒêi·ªÉm Trung B√¨nh</div>
      <div class="score-big" id="displayScore">--</div>
      <div>
        X·∫øp lo·∫°i: <span id="displayGrade">--</span>
        <span id="gradeBadge" class="grade-badge"></span>
      </div>
    </div>
  </div>

  <script>
    // H√†m x·ª≠ l√Ω khi nh·∫•n Enter
    function handleEnter(e) {
      if (e.key === 'Enter') {
        tinhDiem();
      }
    }

    function resetForm() {
      document.getElementById('diemQuaTrinh').value = '';
      document.getElementById('diemThiCuoiKy').value = '';
      document.getElementById('resultBox').style.display = 'none';
      resetErrors();
      document.getElementById('diemQuaTrinh').focus();
    }

    function resetErrors() {
      document.getElementById('diemQuaTrinh').classList.remove('invalid');
      document.getElementById('diemThiCuoiKy').classList.remove('invalid');
      document.getElementById('err-qt').style.display = 'none';
      document.getElementById('err-ck').style.display = 'none';
    }

    function tinhDiem() {
      resetErrors();
      
      const inputQT = document.getElementById('diemQuaTrinh');
      const inputCK = document.getElementById('diemThiCuoiKy');
      
      const qt = parseFloat(inputQT.value);
      const ck = parseFloat(inputCK.value);
      let hasError = false;

      // Validate
      if (isNaN(qt) || qt < 0 || qt > 10) {
        inputQT.classList.add('invalid');
        document.getElementById('err-qt').style.display = 'block';
        hasError = true;
      }
      if (isNaN(ck) || ck < 0 || ck > 10) {
        inputCK.classList.add('invalid');
        document.getElementById('err-ck').style.display = 'block';
        hasError = true;
      }

      if (hasError) {
        document.getElementById('resultBox').style.display = 'none';
        return;
      }

      // T√≠nh to√°n (Gi·∫£ s·ª≠ t·ª∑ l·ªá 50-50 nh∆∞ code c≈© c·ªßa b·∫°n)
      const dtb = (qt + ck) / 2;
      const dtbFormatted = dtb.toFixed(2);

      // X·∫øp lo·∫°i
      let hang = '';
      let colorClass = '';
      let bgClass = '';

      if (dtb >= 8.5) { hang = 'A'; colorClass = 'color-good'; bgClass = 'bg-good'; }
      else if (dtb >= 7.8) { hang = 'B+'; colorClass = 'color-good'; bgClass = 'bg-good'; }
      else if (dtb >= 7.0) { hang = 'B'; colorClass = 'color-good'; bgClass = 'bg-good'; }
      else if (dtb >= 6.3) { hang = 'C+'; colorClass = 'color-mid'; bgClass = 'bg-mid'; }
      else if (dtb >= 5.5) { hang = 'C'; colorClass = 'color-mid'; bgClass = 'bg-mid'; }
      else if (dtb >= 4.8) { hang = 'D+'; colorClass = 'color-mid'; bgClass = 'bg-mid'; }
      else if (dtb >= 4.0) { hang = 'D'; colorClass = 'color-bad'; bgClass = 'bg-bad'; }
      else if (dtb >= 3.0) { hang = 'F+'; colorClass = 'color-bad'; bgClass = 'bg-bad'; }
      else { hang = 'F'; colorClass = 'color-bad'; bgClass = 'bg-bad'; }

      // Hi·ªÉn th·ªã k·∫øt qu·∫£
      const resultBox = document.getElementById('resultBox');
      const displayScore = document.getElementById('displayScore');
      const displayGrade = document.getElementById('displayGrade');
      const gradeBadge = document.getElementById('gradeBadge');

      resultBox.style.display = 'block';
      
      // Reset m√†u c≈©
      displayScore.className = 'score-big ' + colorClass;
      gradeBadge.className = 'grade-badge ' + bgClass;

      displayScore.textContent = dtbFormatted;
      displayGrade.textContent = hang;
      gradeBadge.textContent = hang;
    }
  </script>
</body>
</html>
