<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Gemini AI Chat</title>
  <style>
    body { font-family: sans-serif; background: #f3f3f3; padding: 20px; }
    #chatbox { height: 400px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; background: #fff; }
    .message { margin: 10px 0; }
    .user { color: blue; }
    .bot { color: green; }
    input, button { padding: 10px; font-size: 16px; }
  </style>
</head>
<body>

<h2>Gemini AI Chat</h2>
<div id="chatbox"></div>
<br />
<input type="text" id="input" placeholder="Nh·∫≠p c√¢u h·ªèi..." style="width: 70%;" />
<button onclick="send()">G·ª≠i</button>

<script>
const API_KEY = "AIzaSyBzruPp6ugnStszQbc_Wk9rOAHuq4SE6uA"; // üîÅ Thay b·∫±ng API key t·ª´ Google AI Studio
const API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=" + API_KEY;

const chatbox = document.getElementById("chatbox");
const input = document.getElementById("input");

let history = [];

function addMessage(sender, text) {
  const msg = document.createElement("div");
  msg.className = "message " + sender;
  msg.innerHTML = `<strong>${sender === "user" ? "B·∫°n" : "Bot"}:</strong> ${text}`;
  chatbox.appendChild(msg);
  chatbox.scrollTop = chatbox.scrollHeight;
}

async function send() {
  const userInput = input.value.trim();
  if (!userInput) return;
  addMessage("user", userInput);
  input.value = "";

  history.push({ role: "user", parts: [{ text: userInput }] });

  const response = await fetch(API_URL, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ contents: history })
  });

  const data = await response.json();
  const botReply = data?.candidates?.[0]?.content?.parts?.[0]?.text || "Kh√¥ng c√≥ ph·∫£n h·ªìi.";
  addMessage("bot", botReply);

  history.push({ role: "model", parts: [{ text: botReply }] });
}
</script>

</body>
</html>
